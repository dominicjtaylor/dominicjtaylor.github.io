<!DOCTYPE html>
<html lang="en">
<head>
  <title>Dominic Taylor</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="webgl_styles.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>

  <!-- WebGL canvas container -->
  <div id="webgl-container"></div>

<div id="header-container"></div>

  <!-- Overlay iframe -->
  <!-- <iframe id="overlay" src="no-sidebar.html"></iframe> -->
  <!-- <div id="overlay"></div> -->
<div id="overlay-container">
  <iframe id="overlay-frame" style="opacity:0; pointer-events:none;"></iframe>
</div>

  <!-- Horizontal scrolling sections -->
  <div id="horizontal-scroll">
    <div class="panel-wrapper">
      <section class="panel" id="section1">
		<div class="panel-header">
			<div class="panel-header-inner">
			<h1>Home</h1>
			</div>
		</div>
		<div class="panel-content">
			<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Scroll down for more content.</p> -->
			<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Scroll down for more content.</p> -->
		</div>
      </section>
      <section class="panel" id="section2">
		<div class="panel-header">
			<div class="panel-header-inner">
			<h1>About</h1>
			</div>
		</div>
		<div class="panel-content">
			<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Scroll down for more content.</p> -->
		</div>
      </section>
      <section class="panel" id="section3">
		<div class="panel-header">
			<div class="panel-header-inner">
			<h1>Work</h1>
			</div>
		</div>
		<div class="panel-content">
			<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Scroll down for more content.</p> -->
		</div>
      </section>
      <section class="panel" id="section4">
		<div class="panel-header">
			<div class="panel-header-inner">
			<h1>Projects</h1>
			</div>
		</div>
		<div class="panel-content">
			<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Scroll down for more content.</p> -->
		</div>
      </section>
      <section class="panel" id="section5">
		<div class="panel-header">
			<div class="panel-header-inner">
			<h1>Contact</h1>
			</div>
		</div>
		<div class="panel-content">
			<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Scroll down for more content.</p> -->
		</div>
      </section>
    </div>
  </div>
<!-- <div class="scroll-hint scroll-left">←</div> -->
<!-- <div class="scroll-hint scroll-right">→</div> -->
<!-- <div class="scroll-hint scroll-down">↓</div> -->
<!-- <div class="scroll-hint scroll-left">⇠</div> -->
<!-- <div class="scroll-hint scroll-right">⇢</div> -->
<!-- <div class="scroll-hint scroll-down">⇣</div> -->
<div class="scroll-right"></div>
<div class="scroll-left"></div>
<div class="scroll-down"></div>

  <!-- JS -->
  <script type="module" src="js/network_cinematic_webgl.js"></script>
  <!-- <script type="module" src="script.js?v=<?php echo time(); ?>"></script> -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<script>
const sectionHTML = {
  'section1': 'webgl_home.html',
  'section2': 'webgl_about.html',
  'section3': 'webgl_work.html',
  'section4': 'webgl_projects.html',
  'section5': 'webgl_contact.html'
};

// Keep track of loaded sections
const loadedSections = new Set();

document.querySelectorAll('.panel').forEach(panel => {
  const content = panel.querySelector('.panel-content');
  const sectionId = panel.id;

  panel.addEventListener('scroll', async () => {
    // Fade out header as user scrolls
    const headerInner = panel.querySelector('.panel-header-inner');
    <!-- const fraction = Math.min(scrollTop / fadeDistance, 1); -->
    const scrollFraction = panel.scrollTop * 5 / (panel.scrollHeight - panel.clientHeight);
    headerInner.style.opacity = `${1 - scrollFraction}`;

    // Load the external HTML if not already loaded and scrolled a little
    if (!loadedSections.has(sectionId) && panel.scrollTop > 50) {
      try {
        const response = await fetch(sectionHTML[sectionId]);
        const html = await response.text();
	const parser = new DOMParser();
	const doc = parser.parseFromString(html,"text/html");
	const bodyContent = doc.body.innerHTML;

	content.innerHTML = `<div class="no-sidebar-container">${bodyContent}</div>`;
	loadedSections.add(sectionId);

        <!-- content.innerHTML = html; -->
        <!-- // Mark as loaded -->
        <!-- loadedSections.add(sectionId); -->

        // Fade in content
        content.style.opacity = 0;
        content.style.transition = 'opacity 0.8s ease-out';
        requestAnimationFrame(() => {
          content.style.opacity = 1;
        });
      } catch (err) {
        console.error(`Failed to load ${sectionHTML[sectionId]}:`, err);
      }
    }
  });
});
</script>

<script>
  async function loadHeader() {
    try {
      const response = await fetch('webgl_header.html');
      const html = await response.text();
      document.getElementById('header-container').innerHTML = html;
    } catch (err) {
      console.error('Failed to load header:', err);
    }
  }
  loadHeader();
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const panels = Array.from(document.querySelectorAll(".panel"));
  let currentPanelIndex = 0;

  function scrollToPanel(index) {
    if (index >= 0 && index < panels.length) {
      panels[index].scrollIntoView({ behavior: "smooth", block: "start" });
      currentPanelIndex = index;
    }
  }

  // Arrow click handlers
  document.querySelector(".scroll-left").addEventListener("click", () => {
    const currentPanel = panels[currentPanelIndex];
    if (currentPanel.scrollTop === 0) {
      scrollToPanel(currentPanelIndex - 1);
    }
  });

  document.querySelector(".scroll-right").addEventListener("click", () => {
    const currentPanel = panels[currentPanelIndex];
    if (currentPanel.scrollTop === 0) {
      scrollToPanel(currentPanelIndex + 1);
    }
  });

  document.querySelector(".scroll-down").addEventListener("click", () => {
    const currentPanel = panels[currentPanelIndex];
    const content = currentPanel.querySelector(".panel-content");
    if (content) {
      const offset = content.offsetTop; // distance of content from top of panel
      currentPanel.scrollTo({ top: offset, behavior: "smooth" });
    }
  });
});
</script>

</body>
</html>

